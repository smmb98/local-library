<%- include('../includes/layout.ejs') %>
</head>

<body>
	<%- include('../includes/sidebar.ejs') %>

	<h1><%= title %>: <%= author.name %></h1>
	<p><%= author.lifespan %> </p>

	<% if (author_books.length) { %>
	<p><strong>Delete the following books before attempting to delete this author.</strong></p>

	<div style='margin-left:20px;margin-top:20px'>
		<h4>Books</h4>
		<dl>
			<% author_books.forEach(book => { %>
			<dt>
				<a href="<%= book.url %>"><%= book.title %></a>
			</dt>
			<dd>
				<%= book.summary %>
			</dd>
			<% }) %>
		</dl>
	</div>

	<% } else { %>
	<p>Do you really want to delete this Author?</p>

	<form action="" method="post">
		<div class="form-group">
			<input type="hidden" id="authorid" class="form-control" name='authorid' required='true' value=<%= author._id %>>
		</div>

		<button class="btn btn-primary" type="submit">Submit</button>
	</form>
	<% } %>
	
	<%- include('../includes/footer.ejs') %>